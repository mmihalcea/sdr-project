<p-dataView *ngIf="reviews" #dv [value]="reviews" [paginator]="true" [rows]="10" filterBy="description"
            layout="list">
  <ng-template pTemplate="header">
    <div class="flex flex-column md:flex-row md:justify-content-between">
      <!--      <p-dropdown [options]="sortOptions" [(ngModel)]="sortKey" placeholder="Sort By Price" (onChange)="onSortChange($event)" styleClass="p-mb-2 p-mb-md-0"></p-dropdown>-->
      <button pButton class="mr-1" (click)="showDialog()">Adaugă recenzie</button>
      <span class="p-input-icon-left mb-2 md:mb-0">
                  <i class="pi pi-search"></i>
                          <input type="search" pInputText placeholder="Caută după descriere"
                                 (input)="dv.filter($any($event.target).value)">
              </span>
    </div>

  </ng-template>
  <ng-template let-review pTemplate="listItem">
    <div class="col-12 my-1">
      <h4 class="mt-1">{{review.title}}</h4>
      <p style="line-break: anywhere">{{review.description}}</p>
      <div class="flex justify-content-between">
        <div class="inline-flex align-items-center details-label">
          <i class="pi pi-user mr-1"></i>
          <p>{{review.user.username}}</p></div>
        <div class="inline-flex align-items-center details-label">
          <i class="pi pi-clock mr-1"></i>
          <p>{{review.datePosted | date: 'dd/MM/yyy HH:mm:ss'}}</p>
        </div>
      </div>
      <p-rating [readonly]="true" [ngModel]="review.rating" [cancel]="false"></p-rating>
    </div>
  </ng-template>
</p-dataView>
<p-dialog header="Header" [(visible)]="displayDialog" [breakpoints]="{'960px': '75vw'}" [style]="{width: '30vw'}"
          [draggable]="false" [resizable]="false">
  <form fxLayout="column" [formGroup]="reviewForm" (ngSubmit)="onSubmit()">
    <div class="inline-flex">
      <label for="rating" class="mr-1">Rating:</label>
      <p-rating id="rating" formControlName="rating" [cancel]="false"></p-rating>
    </div>
    <span class="p-float-label mt-2">
        <input id="Title" type="text" formControlName="title" pInputText class="w-full"/>
        <label for="title">Titlu</label>
      </span>
    <span class="p-float-label mt-2">
        <textarea pInputTextarea id="description" type="text" formControlName="description"
                  class="w-full" [rows]="7"></textarea>
        <label for="description">Descriere</label>
      </span>
  </form>
  <ng-template pTemplate="footer">
    <p-button (click)="displayDialog=false" label="Renunță" styleClass="p-button-text"></p-button>
    <p-button (click)="displayDialog=false; addReview()" label="Adaugă" styleClass="p-button-text"></p-button>
  </ng-template>
</p-dialog>
